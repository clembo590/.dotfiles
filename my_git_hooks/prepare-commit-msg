#!/bin/bash

# Define the allowed commit message types
ALLOWED_TYPES=("feat" "fix" "chore" "docs" "style" "refactor" "test" "perf" "build" "ci" "revert" "wip")

# Get the commit message from the commit file
commit_message=$(cat "$1")

# Extract the commit type
commit_type=$(echo "$commit_message" | awk '{print $1}')

# Check if the commit type is allowed
if [[ ! " ${ALLOWED_TYPES[@]} " =~ " ${commit_type} " ]]; then
    # Prepend "wip:" to the original message
    new_message="wip:$commit_message"

    # Overwrite the commit message with the corrected message
    echo "$new_message" > "$1"
fi
